{"componentChunkName":"component---src-templates-lesson-js","path":"/courses/magento-2-beginner/model-magento-2","result":{"data":{"site":{"siteMetadata":{"url":"https://magemastery.net","twitterHandle":"@max_pronko"}},"LessonQuery":{"html":"<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; \" > <div class=\"embedVideo-container\"> <iframe src=\"https://www.youtube-nocookie.com/embed/UKRpXNld3Lc?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" allowfullscreen></iframe> </div> </div></p>\n<h1>Model in Magento 2</h1>\n<p>Model is one of the must have components for CRUD operations in Magento 2 framework.\nIn this lesson, we are going to learn what is a model, what are the capabilities of the model and how to create a model and use it in your custom Magento 2 extension.</p>\n<h2>Lesson Overview</h2>\n<p>In this lesson we are going to learn the following:</p>\n<ul>\n<li>What is a Model?</li>\n<li>Model Capabilities</li>\n<li>How to create a Model and use it in a Magento 2?</li>\n</ul>\n<h2>What is a Model in Magento 2?</h2>\n<p>A Model is a class that represents an entity or a record from a database.\nThe model also provides access to entity data that is used across the Magento 2 application.\nThe model term comes from a Model-View-Controller design pattern and is an important component to understand in Magento 2.</p>\n<p>In order to create a model, a PHP class should extend an AbstractModel class, that comes from a Magento 2 framework.\nThe model class inherits methods and logic that the AbstractModel class provides.</p>\n<p>Let’s have a look at the PHP class called User. The user class extends an AbstractModel class and can be called a model.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Magento<span class=\"token punctuation\">\\</span>Framework<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>AbstractModel</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractModel</span>\n<span class=\"token punctuation\">{</span>    \n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In order to use the newly created User Model, we have to create a new instance of a User.\nA User Factory class creates a User instance, the setData method allows setting the value of “Max” to the key first name.\nThe user object stores this data, and it can be accessed with the help of the getData method.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Controller</span>\n<span class=\"token punctuation\">{</span>    \n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n         <span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">userFactory</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>‘first_name’<span class=\"token punctuation\">,</span> ‘Max’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n         <span class=\"token variable\">$firstName</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$user</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>‘first_name’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you noticed, we don’t use “new” operator in order to create a User object.\nThis is because every model has a dependency that is injected into a construct method, and with the help of an Inversion of Control implemented in Magento 2, we can inject dependencies automatically. </p>\n<p>For user objects to be created, we can use a UserFactory class that is automatically generated by Magento 2 framework at the time we've requested it in a construct method.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">MageMastery<span class=\"token punctuation\">\\</span>ModelExample<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>User</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">MageMastery<span class=\"token punctuation\">\\</span>ModelExample<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>UserFactory</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Controller</span> <span class=\"token punctuation\">{</span>   \n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$userFactory</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>UserFactory <span class=\"token variable\">$userFactory</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n         <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">userFactory</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$userFactory</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The User Factory class is also known as a Model Factory class with the single create method. The only responsibility of this auto-generated User Factory class is to create new instances of the User class.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36d3820d8380a7f4458e87beb38d4313/eff2e/model-factory-class.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBklEQVQoz42RXWsTQRSG95dYMcnuzO7OzmaTmE2CJtnEjWlqbSn0SgWTUntR1FgUKgj2RvDCCy/0ThQ/EEVERS0pfqGi/2pez0y6BYuoFw/vOWfeOXP2rLV89xVW77/H8N47XHi8g/WHE1x8soPN559wiXTtwTbOP5pgTPHlpx+w+ewjrr34jK2XX3Dj9VfcfPMNt95+V7e3f+DO5KeyXCHBCB5IOL4wykiZCODLEEITFhEYQqOySDEhpDSxjCJlNCwqy3NdsIKNSBTRbXXQbDSRHG2b3M7bcF0O5jgGE9sMuQM5hH6INEkhvVDnStc558riDke1W8bSlQFWts5g5fppjIjlq/Oozx6mBhxRKUKJYAWGxiDGyY0USxsD8p3C4riP+XGq4mMVUC9l6Qu6YTpsYjBMMTfqYW7Yw+y5DmrHK3CZj16/jxMLCxA0la711xL0RwkW1wbonW2hv5qouFvRj9MO6ZNFKFCr1NE+ktDndtBqtMHyHJ5waUcRokoVMa2h3uzA9RicHENhxkZuJo/CQRv2IUcJ6dNKXGrI6VI5QLlaQlyrotaIUSWVUWDqnHG4nGszMm9QFPADn37KVClXuk7nZkLdXYnIV37o7SFLganrc8/zDJlXnwVRYFTuaua1yLj3utGM3Tw71/qbdz9Tz3TCbII/sX/Cf3mtvxn+h+yRTH8BD5B1ovmxKc0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Model Factory Class\"\n        title=\"Model Factory Class\"\n        src=\"/static/36d3820d8380a7f4458e87beb38d4313/f0628/model-factory-class.png\"\n        srcset=\"/static/36d3820d8380a7f4458e87beb38d4313/8c2ab/model-factory-class.png 300w,\n/static/36d3820d8380a7f4458e87beb38d4313/3f01f/model-factory-class.png 600w,\n/static/36d3820d8380a7f4458e87beb38d4313/f0628/model-factory-class.png 1200w,\n/static/36d3820d8380a7f4458e87beb38d4313/57025/model-factory-class.png 1800w,\n/static/36d3820d8380a7f4458e87beb38d4313/eff2e/model-factory-class.png 1920w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Resource Model Relation</h2>\n<p>A model usually represents a business entity that is stored in a database.\nFor the model to properly work, the so-called Resource Model class relation has to be provided inside the _construct() method.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Magento<span class=\"token punctuation\">\\</span>Framework<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>AbstractModel</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractModel</span>\n<span class=\"token punctuation\">{</span>    \n     <span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function\">_construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">{</span>\n          <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">_init</span><span class=\"token punctuation\">(</span>ResourceClassName<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Don’t be confused with the public __construct() method.\nAs this is a protected method with the single underscore.\nInside this method, the _init method should be called with the name of the resource model class.\nWe are going to talk about Resource Models in the next <a href=\"/courses/magento-2-beginner\">Mage Mastery lesson</a>.</p>\n<h2>Optional Model Interfaces</h2>\n<p>A model can optionally implement interfaces for clarity and ease of use or to provide additional capabilities.\nThe IdentityInterface interface can be added if the model needs to have a caching capability, let’s say, every time a model is saved or deleted, the cache for this model is cleared.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/de71c3a71d4514a46c7b8c6c8058982d/eff2e/model-optional-interfaces.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVQoz21SS2sTURjNL3GjzX1O3ow6ibQzSTGTWtpindgEuhGsJFUkSiIKLlwILly40LXWByqCD4Q2vrGi/+oev7l5OAkuDt/H+b5z7rl3JhU9eofOkwNceryP3b0DXHn2Cb0XXzB49Q03X39Hd2+Iy0+H6D3/jP7Lr5a7/eYH7rz9ibvvD3HvwyHuf/xlHuz/xsPhH5OSThZMZ8Cpcu0gLRkWRHoKoRh0RlvEvVAc0oJBaYFMLotsLm8ItqaUEFBSQgoORxfglSMsBW0s+S341TZOLbaRLwQolmoIqts0a41mtONVIiiVh+DMCPIhkKFSRGpIyemEMvxaB5vNPjajPqKtAc6sX0fJXccJ7yyarVuWO3d+gObWDTRWryKTPUlaYWIP8poYKiIlNF09HjAmwLgAF5LAUTruoeh6SDNmeca4hRDKakhrxj4jw9gsWbXWI+OjAseOLKBQLKNYrKDiVnA6qCOsh3BdlwzjfasxY+1swpleKyxvLyLcCbDRXcFaJ8RqdxmNCzXk8jl7aCLITEIzPsEke/qqprETmJXdqmle2zBRb82EHd/UL/pGObQj5HQ3qZ0mTGKSMP5VJKd35NyCTCwXz5I3SuBfwnnYlI42TjaGM67acslE80j9z2gimPTzmJ8ln+wvN/d2Cv7wvU4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Model Optional Interfaces\"\n        title=\"Model Optional Interfaces\"\n        src=\"/static/de71c3a71d4514a46c7b8c6c8058982d/f0628/model-optional-interfaces.png\"\n        srcset=\"/static/de71c3a71d4514a46c7b8c6c8058982d/8c2ab/model-optional-interfaces.png 300w,\n/static/de71c3a71d4514a46c7b8c6c8058982d/3f01f/model-optional-interfaces.png 600w,\n/static/de71c3a71d4514a46c7b8c6c8058982d/f0628/model-optional-interfaces.png 1200w,\n/static/de71c3a71d4514a46c7b8c6c8058982d/57025/model-optional-interfaces.png 1800w,\n/static/de71c3a71d4514a46c7b8c6c8058982d/eff2e/model-optional-interfaces.png 1920w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Or, we can create a Data interface and provide public methods to be able to rely on interfaces rather than concrete implementations.</p>\n<h2>Model Class Location</h2>\n<p>Models are usually located inside the Model directory of a Magento 2 extension.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1070px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/437661d97327adecf0ac37de24e00dcb/d8593/model-location.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.14018691588784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACzElEQVQ4y22S2W7TQBSG+zSIOyiholsSkmZzNsdJ7NjO4tTOvqdN9w0BpUgIuEOIG96Ci2IQvFOlqvJwDmfcRQLX0q8zGp3/m3/meG7u5usdvztvbZygNTm6MkcHbLD7mk0O37Lh/ikb7b9h44Mzd4+rM3vBeI81ObxqTo+RvD/n/v/Wh3u2prdR0ZpMVi1sd2e4s/cSN7dOcDjZx+nmkbvemB1jpzdDWW2gWm4xvdLB+nDvlwdY7e/YZnOC9cbYUSttkLUmFEoWFFTLrXnFvBPfU/QWF1MJaNwH1Fqbdqe3hd3BttMb7QClgsF4D3qjXTDMIUhyHYr8gJLpygWXTMaTVnvbXqDa2rBVvYXT2bFTWx8AT6lVr1XSm5S4AWLB+Ee5osHych31zswLLDWmtpivugk7/S2w2hMwm+NrtSZgWENIiTpkchVS+VpShYlSFdXm1AtUrLGdzKiYlSpO2egCPThd04CCsg50EAgZFVJZDajHXfOazGqM9lC2xl5goT6wY4KMYqHq8HQNUrnWhnZvk+BNCIazEIrmICoUIZ6UIUaKpxSWSClIXi9QqnXttZiEaVF31HIDslIZ3n/8BLsHr+j9TBpMn64/olQqhGM5iMTzEEnkWTRRwFyt6wVmy237+VoWhUzJkeQaJSjSpHddSJ6uXq13XaiQVihtBkIRkRKLLBwRkbxeYFpr2P5gEmNC4S4hN/M0C4trd1oOJCAQToM/lOKVBUNpJK8XKCimvbwax7W45PA0p2cfoGJ0CKxDWuQDKdEgFLqqBEv+OKwEBFgJCowqktcLjBeN70urMVxcjTnc+PnLV/rPaLppmX4RzQVyRRISPFuJAvVxsMM9cbnuBYaz2g/f0wD6FoJ/Hj9ZxQcPffhofgX5+rZyzfv81BPAJze93EPe3943NPrfAjSxYFK+IF2G0qVLXu9X8UbyBfdk6oPzW85f3YfdeCi1axMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Model Location\"\n        title=\"Model Location\"\n        src=\"/static/437661d97327adecf0ac37de24e00dcb/d8593/model-location.png\"\n        srcset=\"/static/437661d97327adecf0ac37de24e00dcb/8c2ab/model-location.png 300w,\n/static/437661d97327adecf0ac37de24e00dcb/3f01f/model-location.png 600w,\n/static/437661d97327adecf0ac37de24e00dcb/d8593/model-location.png 1070w\"\n        sizes=\"(max-width: 1070px) 100vw, 1070px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Important</h2>\n<p>A model should be used when there is a need to retrieve data from a database and present it in the Magento 2 application.\nA model class represents a Domain Model of a Magento 2 extension.</p>\n<p>The AbstractModel class has deprecated CRUD and other methods. These methods shouldn’t be used.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d7bf68256a1dd4be12456b3025e9d67/eff2e/deprecated-methods.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.21875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVQY0z2QwQ6CMBBE+RhaWjhqUwwIaggqGDCCojF6MCbG/7933BbiYdOdnXS2r14YhhBCgHEOSactxhgVd3MppfO49eXo8UmLIJjm0kRRBMoynqRml2d41hXSJIHWGs+2wUBaLxbQSuFR79GRns3nKMsS1XaLa1lgt8qxKQoopYxdTKHGCymwr/b4XC9Y57kL/d5veJ17pFmGJI7JGzDQknS5xKnr0B1bvPsT+kONQ9Mg1tpYmjGQkAN6tu/7hBg4ZNs7TUh2s+05oYrJ4+5LmLvHxvkf+QeKVIF9Zy0SewAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Deprecated Methods\"\n        title=\"Deprecated Methods\"\n        src=\"/static/0d7bf68256a1dd4be12456b3025e9d67/f0628/deprecated-methods.png\"\n        srcset=\"/static/0d7bf68256a1dd4be12456b3025e9d67/8c2ab/deprecated-methods.png 300w,\n/static/0d7bf68256a1dd4be12456b3025e9d67/3f01f/deprecated-methods.png 600w,\n/static/0d7bf68256a1dd4be12456b3025e9d67/f0628/deprecated-methods.png 1200w,\n/static/0d7bf68256a1dd4be12456b3025e9d67/57025/deprecated-methods.png 1800w,\n/static/0d7bf68256a1dd4be12456b3025e9d67/eff2e/deprecated-methods.png 1920w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Model is usually used in conjunction with a Resource Model class.\nThis is the class that knows how to load and store data in a database. We will learn more about Resource Model in our next Mage Mastery lesson.</p>","frontmatter":{"path":"/courses/magento-2-beginner/model-magento-2","title":"Model in Magento 2","lesson_link":null,"lesson_label":null,"description":"By the end of this lesson, you will learn a View Model concept in Magento 2, how to use it and when it is better to use view models for building customizations in Magento 2."}},"LessonsQuery":{"edges":[{"node":{"id":"d9a794e9-328d-526c-947b-72bd91ce5f97","frontmatter":{"title":"Introduction","path":"/courses/magento-2-beginner/introduction","time":60,"timeline_icon":"text"}}},{"node":{"id":"ce23de9b-c605-585f-b905-9a80f95bfccf","frontmatter":{"title":"Getting Started with Magento 2","path":"/courses/magento-2-beginner/getting-started-with-magento-2","time":541,"timeline_icon":"video"}}},{"node":{"id":"579b1bb8-7d60-5656-bf66-733285abb682","frontmatter":{"title":"Project Structure Overview","path":"/courses/magento-2-beginner/project-structure-overview","time":606,"timeline_icon":"video"}}},{"node":{"id":"9e5d18b8-1a30-5bb8-88eb-834d787cffcb","frontmatter":{"title":"A Module in Magento 2","path":"/courses/magento-2-beginner/module-in-magento-2","time":480,"timeline_icon":"video"}}},{"node":{"id":"bfa08926-d719-5d65-867d-97f0465b7cde","frontmatter":{"title":"Create a Page in Magento 2","path":"/courses/magento-2-beginner/create-page-magento-2","time":449,"timeline_icon":"video"}}},{"node":{"id":"7b6c6fb5-b946-55de-bae3-775a9a1f4846","frontmatter":{"title":"Template and Layout Rendering","path":"/courses/magento-2-beginner/template-layout-rendering","time":300,"timeline_icon":"video"}}},{"node":{"id":"276dc6c6-f61b-5c2c-a6a3-66633dcd9b85","frontmatter":{"title":"Passing Data From Controller to Template","path":"/courses/magento-2-beginner/passing-data-from-controller-to-template","time":255,"timeline_icon":"video"}}},{"node":{"id":"a5e6e115-4bff-5614-840e-ace500c5dd9a","frontmatter":{"title":"View Model in Magento 2","path":"/courses/magento-2-beginner/view-model-magento-2","time":300,"timeline_icon":"video"}}},{"node":{"id":"ea399999-1cca-5149-9dfc-85092788f693","frontmatter":{"title":"Model in Magento 2","path":"/courses/magento-2-beginner/model-magento-2","time":260,"timeline_icon":"video"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"prev":{"html":"<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; \" > <div class=\"embedVideo-container\"> <iframe src=\"https://www.youtube-nocookie.com/embed/tjIcX4pbal4?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" allowfullscreen></iframe> </div> </div></p>\n<h1>View Model in Magento 2</h1>\n<p>A view model is a class that allows you to pass data and additional functionality from a place that represents a business logic to a template. It also can provide data loaded from an entity, for example, a product. The view model allows developers to simplify templates and block classes by providing separate classes that are easier to test and maintain.</p>\n<p>The View Model class can hold calculation logic, data lookups, object fetches and pass it directly to a template, so the template’s logic can be as simple as possible.</p>\n<p>View Models usually located in the module’s directory called ViewModel. The location of view model classes, however, is not limited to a ViewModel directory. You can create as many view models as needed in order to provide a required set of separate classes with its own logic.</p>\n<h2>Lesson Overview</h2>\n<p>In this lesson we are going to learn the following:</p>\n<ul>\n<li>What is a View Model?</li>\n<li>How to use View Model?</li>\n<li>When to use a View Model?</li>\n</ul>\n<h2>View Model Example</h2>\n<p>The concept of a view model is simple, and at the same time powerful. Let’s jump into the example to better understand the creation flow. In order to implement a view model, we have to create a PHP class in ViewModel directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductViewModel</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$resource</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>Resource <span class=\"token variable\">$resource</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">resource</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$resource</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getProductBySku</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$sku</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> ProductInterface\n    <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">resource</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sku</span><span class=\"token punctuation\">,</span> ‘sku’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The only requirement is that the ProductViewModel class must implement Magento\\Framework\\View\\Element\\Block\\ArgumentInterface.\nLet's add it.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Magento<span class=\"token punctuation\">\\</span>Framework<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Element<span class=\"token punctuation\">\\</span>Block<span class=\"token punctuation\">\\</span>ArgumentInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductViewModel</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ArgumentInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once the view model class is created, we have to add it to a layout XML file. So that during layout rendering, it will find the view model class, instantiate it and add into the pool of a Block class dependencies.</p>\n<p>A Layout XML file should be located in the view/frontend/layout directory of the module. In the Template and Layout rendering lesson, we’ve discussed different layout configuration areas. Make sure to check the lesson to better understand frontend and adminhtml directory locations for layout xml files.</p>\n<p>Inside the layout file, we have to add new <argument /> node in the <arguments /> and.\nThe two attributes should be added to the <argument /> node, the name of the view model variable and its type, the type should be always set to an object since we pass a class name that has to be initiated as a view model.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>referenceBlock</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>block.name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arguments</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>argument</span> \n                    <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>view_model<span class=\"token punctuation\">\"</span></span> \n                    <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>object<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>MageMastery\\ViewModelExample\\ViewModel\\ProductViewModel<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>argument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>arguments</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>referenceBlock</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>From the example above, a \"block.name\" can be a name of a block, where we want to add a View Model class.</p>\n<p>Inside the <argument /> node we have to provide the full class name of the view model.\nRemember, all objects that are injected to block arguments as view models should implement ArgumentInterface interface.</p>\n<p>Finally, the template of the block to which we’ve added the view model class can get access to the view model.\nThe view model object is passed as an argument of the Template object. It can be accessed via the getData() method by providing the name of the argument we’ve provided in the layout XML file.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/** @var ProductData $productData */</span>\n<span class=\"token variable\">$productData</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$block</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>“view_model”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After we’ve received an access to the view model, we can start using it in the template.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$productData</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getProductBySku</span><span class=\"token punctuation\">(</span>‘sku’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>And as a result, the data provided from the view model class is rendered by a template.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ecc4164e8ca032f9f870e3fa093d4ff/eff2e/view-model-rendering-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACf0lEQVQoz4WRy09TQRTG+3cQKfJqL23vo6Xl9iVQHgG6cmkCPjAgKkQ0RWIQ3BAlBkSRh0ppsJhoK6aUhQYXhsSycMMCA4sSxY0GAqQghBIaOJ/TK13UGP2SL2cyM+eXb86oTj8OocH3Ds3+GbQwX3k+g1b/W9QOTeLMwGucHQziwvAkGp6+weXREFrGptDqC6Pj1XvcDX9EV3AWHS8/UFdgFr3Tc6QyW0xw2M2w2cyw2y2wWEQ0NTZhoL8X3X096H04iL5jP3g0pNTBkVFcrD8Ps4nHrSY3xu/Vkb+nFs11FaRyFAlwyTxskhYGHYfskycw0tePxMY3fFmLYn0jhs3NbeYtrK6u4/uPNfzcieNOVycyMjJw/7obc+OX6JO/Ed1XK0llL5JQxoDlrlJUVddAlmWM+XyIbe9i8fMSVla+IhqNYnl5GfF4HPv7+0jK4/FArc6ChtNDnZ1PeflaWExCEigeA11wu92wWq2YmJjAViyGSCSCxaUlLCwsYH5+HolEAim1t7czoBqiIECv15NR5OGQpd9Ak02CaOchWXnkiTkY8Q4rTbu7O0qivb09xYeHhzg6OkoDCgyo0+lIEgxgLDZDWYLTZoPd4URxSQkkkwiv16s0ERH+1N+ABQwopoB2i0g1xYVU6XKRq6SMRK2Gnj3xJkl0cHBALFWa2bOVs7a2m5SZmUkGnieuQEcCbyAF6GQJq0sL4a4uR1VVBWSzES/YDP+nzs7byMnOgskogsGSH4JTVjZD2SyQky2srDqKJCoUOfLcuEbh8DQFAgEKBoNpTu6FQlPUUH9Oueu0GpVkSViSpSpgcTlOp8ROWaPRUm5u7j+t1XJpPSnGLxWiGtV1dXXkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"View Model Rendering result\"\n        title=\"View Model Rendering result\"\n        src=\"/static/7ecc4164e8ca032f9f870e3fa093d4ff/f0628/view-model-rendering-result.png\"\n        srcset=\"/static/7ecc4164e8ca032f9f870e3fa093d4ff/8c2ab/view-model-rendering-result.png 300w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/3f01f/view-model-rendering-result.png 600w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/f0628/view-model-rendering-result.png 1200w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/57025/view-model-rendering-result.png 1800w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/eff2e/view-model-rendering-result.png 1920w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>View Model Checklist</h2>\n<p>Let’s recap what we need to create and use a view model.</p>\n<ol>\n<li>Create a PHP class</li>\n<li>Add an ArgumentInterface</li>\n<li>Add a PHP Class into a layout xml</li>\n<li>Retrieve a View Model in a template</li>\n<li>Use View Model public methods</li>\n</ol>\n<h2>When to use a View Model?</h2>\n<p>A view model should be used every time you have to pass data from storage or the other object to a template for rendering. It includes calculation logic, data lookups, object fetches and so on.</p>\n<p>A view model has to be used instead of a block, so your code will be less dependent on block changes in the Magento 2 framework.</p>\n<h2>Conclusion</h2>\n<p>A view model in Magento 2 is a powerful mechanism that allows us to represent and provide data ready for rendering in a template.\nIt provides a simple tool that is recommended to use every time a UI customization should be added.</p>","id":"a5e6e115-4bff-5614-840e-ace500c5dd9a","frontmatter":{"path":"/courses/magento-2-beginner/view-model-magento-2","title":"View Model in Magento 2","time":300,"course":"magento-2-beginner","order":80,"image":null}},"next":null,"courseElement":{"html":"<h2>Course Overview</h2>\n<p>This course is for developers who want to start developing with Magento 2. The course covers basics so you can get up to speed with Magento 2 platform and its architecture.</p>\n<p>We assume that you have little to no experience with Magento 2 platform. The course is built in the easy-to-follow path where you will get all the necessary skills and experience for building websites powered with Magento 2. </p>\n<p>Each lesson provides a video tutorial as well as written content material with the download link to a lesson's source code.</p>\n<p>This course is based on Magento Open Source 2.3.</p>\n<h2>For those who want to</h2>\n<ul>\n<li>Explore Magento 2 framework features and capabilities</li>\n<li>Learn Magento 2 technical glossary e.g. View Model, Controller, Layout, UI Component etc</li>\n<li>Start building Magento 2 websites, but don't know where to get information from.</li>\n</ul>\n<h2>What will you be able to do?</h2>\n<p>Here are just a few things you’ll be able to do after the <strong>Magento 2 for Beginners</strong> course.</p>\n<ul>\n<li>Understand how Magento 2 works. Easily create Magento 2 features and custom Magento 2 modules with one of the leading e-commerce platform in the world.</li>\n<li>Build powerful e-commerce websites. Use all power of PHP OOP and JavaScript components in Magento 2 to create stunning websites.  </li>\n<li>Create clean and high-quality Magento 2 extensions. No more legacy Magento 1 approaches and outdated courses. Start today and learn from the Magento Expert.</li>\n</ul>\n<h2>Are you ready to start your Mage Mastery journey?</h2>\n<p>Start an Introduction lesson of the Magento 2 for Beginners course and follow the course lesson-by-lesson. You will enjoy it.</p>","id":"ffe45dee-c376-5e70-b8b8-9fe66930b73b","frontmatter":{"path":"/courses/magento-2-beginner","title":"Magento 2 for Beginners","code":"magento-2-beginner"}},"courseCode":"magento-2-beginner"}}}