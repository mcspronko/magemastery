{"componentChunkName":"component---src-templates-lesson-js","path":"/courses/magento-2-beginner/view-model-magento-2","result":{"data":{"LessonQuery":{"html":"<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; \" > <div class=\"embedVideo-container\"> <iframe src=\"https://www.youtube-nocookie.com/embed/tjIcX4pbal4?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" allowfullscreen></iframe> </div> </div></p>\n<h1>View Model in Magento 2</h1>\n<p>A view model is a class that allows you to pass data and additional functionality from a place that represents a business logic to a template. It also can provide data loaded from an entity, for example, a product. The view model allows developers to simplify templates and block classes by providing separate classes that are easier to test and maintain.</p>\n<p>The View Model class can hold calculation logic, data lookups, object fetches and pass it directly to a template, so the template’s logic can be as simple as possible.</p>\n<p>View Models usually located in the module’s directory called ViewModel. The location of view model classes, however, is not limited to a ViewModel directory. You can create as many view models as needed in order to provide a required set of separate classes with its own logic.</p>\n<h2>Lesson Overview</h2>\n<p>In this lesson we are going to learn the following:</p>\n<ul>\n<li>What is a View Model?</li>\n<li>How to use View Model?</li>\n<li>When to use a View Model?</li>\n</ul>\n<h2>View Model Example</h2>\n<p>The concept of a view model is simple, and at the same time powerful. Let’s jump into the example to better understand the creation flow. In order to implement a view model, we have to create a PHP class in ViewModel directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductViewModel</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$resource</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>Resource <span class=\"token variable\">$resource</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">resource</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$resource</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getProductBySku</span><span class=\"token punctuation\">(</span>string <span class=\"token variable\">$sku</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> ProductInterface\n    <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">resource</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$sku</span><span class=\"token punctuation\">,</span> ‘sku’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The only requirement is that the ProductViewModel class must implement Magento\\Framework\\View\\Element\\Block\\ArgumentInterface.\nLet's add it.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">use</span> <span class=\"token package\">Magento<span class=\"token punctuation\">\\</span>Framework<span class=\"token punctuation\">\\</span>View<span class=\"token punctuation\">\\</span>Element<span class=\"token punctuation\">\\</span>Block<span class=\"token punctuation\">\\</span>ArgumentInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductViewModel</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ArgumentInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once the view model class is created, we have to add it to a layout XML file. So that during layout rendering, it will find the view model class, instantiate it and add into the pool of a Block class dependencies.</p>\n<p>A Layout XML file should be located in the view/frontend/layout directory of the module. In the Template and Layout rendering lesson, we’ve discussed different layout configuration areas. Make sure to check the lesson to better understand frontend and adminhtml directory locations for layout xml files.</p>\n<p>Inside the layout file, we have to add new <argument /> node in the <arguments /> and.\nThe two attributes should be added to the <argument /> node, the name of the view model variable and its type, the type should be always set to an object since we pass a class name that has to be initiated as a view model.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>referenceBlock</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>block.name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arguments</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>argument</span> \n                    <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>view_model<span class=\"token punctuation\">\"</span></span> \n                    <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>object<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>MageMastery\\ViewModelExample\\ViewModel\\ProductViewModel<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>argument</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>arguments</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>referenceBlock</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>From the example above, a \"block.name\" can be a name of a block, where we want to add a View Model class.</p>\n<p>Inside the <argument /> node we have to provide the full class name of the view model.\nRemember, all objects that are injected to block arguments as view models should implement ArgumentInterface interface.</p>\n<p>Finally, the template of the block to which we’ve added the view model class can get access to the view model.\nThe view model object is passed as an argument of the Template object. It can be accessed via the getData() method by providing the name of the argument we’ve provided in the layout XML file.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">/** @var ProductData $productData */</span>\n<span class=\"token variable\">$productData</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$block</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>“view_model”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After we’ve received an access to the view model, we can start using it in the template.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?=</span> <span class=\"token variable\">$productData</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getProductBySku</span><span class=\"token punctuation\">(</span>‘sku’<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>And as a result, the data provided from the view model class is rendered by a template.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ecc4164e8ca032f9f870e3fa093d4ff/eff2e/view-model-rendering-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACf0lEQVQoz4WRy09TQRTG+3cQKfJqL23vo6Xl9iVQHgG6cmkCPjAgKkQ0RWIQ3BAlBkSRh0ppsJhoK6aUhQYXhsSycMMCA4sSxY0GAqQghBIaOJ/TK13UGP2SL2cyM+eXb86oTj8OocH3Ds3+GbQwX3k+g1b/W9QOTeLMwGucHQziwvAkGp6+weXREFrGptDqC6Pj1XvcDX9EV3AWHS8/UFdgFr3Tc6QyW0xw2M2w2cyw2y2wWEQ0NTZhoL8X3X096H04iL5jP3g0pNTBkVFcrD8Ps4nHrSY3xu/Vkb+nFs11FaRyFAlwyTxskhYGHYfskycw0tePxMY3fFmLYn0jhs3NbeYtrK6u4/uPNfzcieNOVycyMjJw/7obc+OX6JO/Ed1XK0llL5JQxoDlrlJUVddAlmWM+XyIbe9i8fMSVla+IhqNYnl5GfF4HPv7+0jK4/FArc6ChtNDnZ1PeflaWExCEigeA11wu92wWq2YmJjAViyGSCSCxaUlLCwsYH5+HolEAim1t7czoBqiIECv15NR5OGQpd9Ak02CaOchWXnkiTkY8Q4rTbu7O0qivb09xYeHhzg6OkoDCgyo0+lIEgxgLDZDWYLTZoPd4URxSQkkkwiv16s0ERH+1N+ABQwopoB2i0g1xYVU6XKRq6SMRK2Gnj3xJkl0cHBALFWa2bOVs7a2m5SZmUkGnieuQEcCbyAF6GQJq0sL4a4uR1VVBWSzES/YDP+nzs7byMnOgskogsGSH4JTVjZD2SyQky2srDqKJCoUOfLcuEbh8DQFAgEKBoNpTu6FQlPUUH9Oueu0GpVkSViSpSpgcTlOp8ROWaPRUm5u7j+t1XJpPSnGLxWiGtV1dXXkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"View Model Rendering result\"\n        title=\"View Model Rendering result\"\n        src=\"/static/7ecc4164e8ca032f9f870e3fa093d4ff/f0628/view-model-rendering-result.png\"\n        srcset=\"/static/7ecc4164e8ca032f9f870e3fa093d4ff/8c2ab/view-model-rendering-result.png 300w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/3f01f/view-model-rendering-result.png 600w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/f0628/view-model-rendering-result.png 1200w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/57025/view-model-rendering-result.png 1800w,\n/static/7ecc4164e8ca032f9f870e3fa093d4ff/eff2e/view-model-rendering-result.png 1920w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>View Model Checklist</h2>\n<p>Let’s recap what we need to create and use a view model.</p>\n<ol>\n<li>Create a PHP class</li>\n<li>Add an ArgumentInterface</li>\n<li>Add a PHP Class into a layout xml</li>\n<li>Retrieve a View Model in a template</li>\n<li>Use View Model public methods</li>\n</ol>\n<h2>When to use a View Model?</h2>\n<p>A view model should be used every time you have to pass data from storage or the other object to a template for rendering. It includes calculation logic, data lookups, object fetches and so on.</p>\n<p>A view model has to be used instead of a block, so your code will be less dependent on block changes in the Magento 2 framework.</p>\n<h2>Conclusion</h2>\n<p>A view model in Magento 2 is a powerful mechanism that allows us to represent and provide data ready for rendering in a template.\nIt provides a simple tool that is recommended to use every time a UI customization should be added.</p>","frontmatter":{"path":"/courses/magento-2-beginner/view-model-magento-2","title":"View Model in Magento 2","lesson_link":"https://github.com/magemastery/passing-data-controller-template","lesson_label":"Download Source Code","description":"By the end of this lesson, you will learn a View Model concept in Magento 2, how to use it and when it is better to use view models for building customizations in Magento 2."}},"CourseQuery":{"frontmatter":{"title":"Magento 2 for Beginners","path":"/courses/magento-2-beginner"}},"NextLessonQuery":null,"PrevLessonQuery":{"frontmatter":{"path":"/courses/magento-2-beginner/passing-data-from-controller-to-template"}},"LessonsQuery":{"edges":[{"node":{"id":"d9a794e9-328d-526c-947b-72bd91ce5f97","frontmatter":{"title":"Introduction","path":"/courses/magento-2-beginner/introduction","time":60,"timeline_icon":"text"}}},{"node":{"id":"ce23de9b-c605-585f-b905-9a80f95bfccf","frontmatter":{"title":"Getting Started with Magento 2","path":"/courses/magento-2-beginner/getting-started-with-magento-2","time":541,"timeline_icon":"video"}}},{"node":{"id":"579b1bb8-7d60-5656-bf66-733285abb682","frontmatter":{"title":"Project Structure Overview","path":"/courses/magento-2-beginner/project-structure-overview","time":606,"timeline_icon":"video"}}},{"node":{"id":"9e5d18b8-1a30-5bb8-88eb-834d787cffcb","frontmatter":{"title":"A Module in Magento 2","path":"/courses/magento-2-beginner/module-in-magento-2","time":480,"timeline_icon":"video"}}},{"node":{"id":"bfa08926-d719-5d65-867d-97f0465b7cde","frontmatter":{"title":"Create a Page in Magento 2","path":"/courses/magento-2-beginner/create-page-magento-2","time":449,"timeline_icon":"video"}}},{"node":{"id":"7b6c6fb5-b946-55de-bae3-775a9a1f4846","frontmatter":{"title":"Template and Layout Rendering","path":"/courses/magento-2-beginner/template-layout-rendering","time":300,"timeline_icon":"video"}}},{"node":{"id":"276dc6c6-f61b-5c2c-a6a3-66633dcd9b85","frontmatter":{"title":"Passing Data From Controller to Template","path":"/courses/magento-2-beginner/passing-data-from-controller-to-template","time":255,"timeline_icon":"video"}}},{"node":{"id":"a5e6e115-4bff-5614-840e-ace500c5dd9a","frontmatter":{"title":"View Model in Magento 2","path":"/courses/magento-2-beginner/view-model-magento-2","time":300,"timeline_icon":"video"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"course":"magento-2-beginner","lessonOrder":80,"lessonOrderStep":91}}}